<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Cherokee Chooters Shred 2026</title>
    
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --bg: #f3f4f6;
            --card-bg: #ffffff;
            --text-main: #1f2937;
            --text-muted: #6b7280;
            --success: #10b981;
            --danger: #ef4444;
            --grid-gap: 16px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', sans-serif;
            background-color: var(--bg);
            color: var(--text-main);
            padding: 1.5rem;
            min-height: 100vh;
        }

        .container { max-width: 1200px; margin: 0 auto; padding-bottom: 4rem; }

        /* --- HEADER --- */
        .header { text-align: center; margin-bottom: 2rem; }
        h1 { font-size: 2.5rem; font-weight: 800; letter-spacing: -0.05em; margin-bottom: 0.5rem; background: linear-gradient(135deg, #4f46e5, #ec4899); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .quote-box { background: white; padding: 1rem; border-radius: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); display: inline-block; max-width: 600px; margin: 0 auto; font-style: italic; color: var(--text-muted); }

        /* --- BENTO GRID --- */
        .bento-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: auto auto;
            gap: var(--grid-gap);
            margin-bottom: 2rem;
        }

        .bento-card {
            background: var(--card-bg);
            border-radius: 24px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .card-cruise { grid-column: span 2; background: linear-gradient(135deg, #3b82f6, #06b6d4); color: white; }
        .card-total  { grid-column: span 2; background: linear-gradient(135deg, #8b5cf6, #d946ef); color: white; }
        .card-leader-lbs { grid-column: span 2; background:white; border-left: 5px solid #fbbf24; }
        .card-leader-pct { grid-column: span 2; background:white; border-left: 5px solid #10b981; }

        .bento-label { font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.9; margin-bottom: 0.5rem; font-weight: 600; }
        .bento-value { font-size: 2.5rem; font-weight: 800; line-height: 1; }
        .bento-sub   { font-size: 1rem; margin-top: 0.5rem; opacity: 0.9; }

        /* --- NUMPAD LOGGING --- */
        .logging-section {
            background: white;
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .section-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--text-main); }

        .person-selector { display: flex; gap: 10px; justify-content: center; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .person-btn {
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            border: 2px solid #e5e7eb;
            background: white;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .person-btn.selected { border-color: var(--primary); background: var(--primary); color: white; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3); }

        .weight-display { font-size: 4rem; font-weight: 700; color: var(--text-main); margin-bottom: 1.5rem; height: 80px; display: flex; align-items: center; justify-content: center; }
        .weight-display.placeholder { color: #d1d5db; }
        .cursor { animation: blink 1s infinite; color: var(--primary); }

        .numpad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; max-width: 400px; margin: 0 auto; }
        .num-btn { background: #f9fafb; border: none; border-radius: 16px; padding: 1.25rem 0; font-size: 1.75rem; font-weight: 600; color: var(--text-main); cursor: pointer; transition: background 0.1s; box-shadow: 0 2px 0 #e5e7eb; }
        .num-btn:active { background: #e5e7eb; transform: translateY(2px); box-shadow: none; }
        .num-btn.submit { background: var(--success); color: white; grid-column: span 3; box-shadow: 0 2px 0 #059669; }
        .num-btn.delete { background: #fee2e2; color: var(--danger); box-shadow: 0 2px 0 #fca5a5; }

        /* --- CARDS & BADGES --- */
        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: var(--grid-gap); margin-bottom: 2rem; }
        .mini-card { background: white; padding: 1.5rem; border-radius: 16px; border-left: 5px solid transparent; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .mini-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; }
        .mini-name { font-size: 1.25rem; font-weight: 700; }
        .mini-weight { font-size: 1.5rem; font-weight: 700; }
        .badges-container { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 10px; }
        .badge { font-size: 0.7rem; padding: 2px 8px; border-radius: 10px; background: #e5e7eb; font-weight: 600; }
        .badge.gold { background: #fef3c7; color: #b45309; }
        .badge.green { background: #dcfce7; color: #166534; }
        .badge.blue { background: #dbeafe; color: #1e40af; }

        /* --- CONTAINERS --- */
        .chart-container, .table-container, .message-board, .recipe-container, .retroactive-container {
            background: white; padding: 1.5rem; border-radius: 24px; margin-bottom: 2rem; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
        }
        .chart-wrapper { height: 400px; position: relative; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        th { background: #f9fafb; padding: 12px; text-align: left; font-weight: 600; }
        td { padding: 12px; border-bottom: 1px solid #e5e7eb; }
        .btn-download { background: var(--success); color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; float: right; font-weight: 600; }

        /* --- MESSAGES --- */
        .message-input-area { display: flex; gap: 10px; margin-bottom: 1rem; flex-wrap: wrap; }
        .message-select { padding: 10px; border-radius: 8px; border: 1px solid #d1d5db; }
        .message-input { flex: 1; padding: 10px; border-radius: 8px; border: 1px solid #d1d5db; }
        .btn-post { background: var(--primary); color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; font-weight: 600; }
        .messages-list { max-height: 300px; overflow-y: auto; }
        .message-item { padding: 10px; border-bottom: 1px solid #f3f4f6; }
        .message-meta { font-size: 0.8rem; color: var(--text-muted); display: flex; justify-content: space-between; margin-bottom: 4px; }
        .btn-del-msg { background: none; border: none; color: var(--danger); cursor: pointer; font-size: 1rem; }

        /* --- RECIPES --- */
        .recipe-name { font-size: 1.5rem; color: var(--primary); margin-bottom: 1rem; font-weight: 700; }
        .portion-btn { border: 1px solid var(--primary); background: white; color: var(--primary); padding: 5px 15px; border-radius: 20px; cursor: pointer; margin-right: 5px; }
        .portion-btn.active { background: var(--primary); color: white; }
        .macros-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(80px, 1fr)); gap: 10px; margin-top: 1rem; text-align: center; }
        .macro-card { background: #f9fafb; padding: 10px; border-radius: 12px; }

        /* --- RETROACTIVE --- */
        .retro-form { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; align-items: end; }
        .form-label { font-size: 0.8rem; font-weight: 600; margin-bottom: 4px; display: block; }
        .retro-input { width: 100%; padding: 10px; border: 1px solid #d1d5db; border-radius: 8px; }

        /* --- HEATMAP --- */
        .heatmap-grid { display: flex; gap: 4px; overflow-x: auto; padding-bottom: 10px; }
        .heatmap-col { display: flex; flex-direction: column; gap: 4px; }
        .day-cell { width: 12px; height: 12px; border-radius: 2px; background: #ebedf0; }
        .level-1 { background: #9be9a8; } .level-2 { background: #40c463; } .level-3 { background: #30a14e; } .level-4 { background: #216e39; }

        @media (max-width: 768px) {
            .bento-grid { grid-template-columns: 1fr; }
            .card-cruise, .card-total, .card-leader-lbs, .card-leader-pct { grid-column: span 1; }
            h1 { font-size: 2rem; }
            .weight-display { font-size: 3rem; }
        }
        @keyframes blink { 50% { opacity: 0; } }
    </style>
</head>
<body>
    <div id="root">
        <div class="loading" style="text-align: center; padding-top: 4rem;">
            <div style="font-size: 3rem;">üí™</div>
            <p style="margin-top:1rem; color:#6b7280">Loading Tracker...</p>
        </div>
    </div>

    <script>
        /* --- FULL DATA CONTENT --- */
        const quotes = [
            "The only bad workout is the one that didn't happen.",
            "Your body can stand almost anything. It's your mind you have to convince.",
            "Success is the sum of small efforts repeated day in and day out.",
            "The difference between try and triumph is a little umph.",
            "Don't wish for it, work for it.",
            "Strive for progress, not perfection.",
            "The body achieves what the mind believes.",
            "You don't have to be extreme, just consistent.",
            "Every journey begins with a single step.",
            "Champions keep playing until they get it right.",
            "The pain you feel today will be the strength you feel tomorrow.",
            "Believe in yourself and all that you are.",
            "Push yourself because no one else is going to do it for you.",
            "Great things never come from comfort zones.",
            "Wake up with determination. Go to bed with satisfaction.",
            "Your only limit is you.",
            "It's going to be hard, but hard does not mean impossible.",
            "Fall in love with taking care of yourself.",
            "Small progress is still progress.",
            "You are stronger than you think.",
            "Make yourself proud.",
            "The only person you should try to be better than is the person you were yesterday.",
            "Don't stop when you're tired. Stop when you're done.",
            "You're one workout away from a good mood.",
            "Take care of your body. It's the only place you have to live.",
            "The secret of getting ahead is getting started.",
            "Motivation is what gets you started. Habit is what keeps you going.",
            "Be stronger than your excuses.",
            "Success starts with self-discipline.",
            "Doubt kills more dreams than failure ever will.",
            "The harder you work for something, the greater you'll feel when you achieve it.",
            "Dream bigger. Do bigger.",
            "Don't wait for opportunity. Create it.",
            "Sometimes later becomes never. Do it now.",
            "Sweat is magic. Cover yourself in it daily to grant your wishes.",
            "If it doesn't challenge you, it won't change you.",
            "Making excuses burns zero calories per hour.",
            "You miss 100% of the shots you don't take.",
            "A one hour workout is only 4% of your day.",
            "The only way to finish is to start.",
            "Transformation is not a future event. It's a present activity.",
            "Your health is an investment, not an expense.",
            "Fitness is not about being better than someone else. It's about being better than you used to be.",
            "The groundwork for all happiness is good health.",
            "Take care of yourself. You deserve it.",
            "Progress, not perfection.",
            "Every accomplishment starts with the decision to try.",
            "The best project you'll ever work on is you.",
            "Good things come to those who sweat.",
            "Train like a beast, look like a beauty.",
            "Excuses don't burn calories.",
            "Your body hears everything your mind says. Stay positive.",
            "Eat clean, train dirty.",
            "Strong is the new skinny.",
            "Wake up. Work out. Look hot. Kick ass.",
            "The only bad decision is not making one.",
            "Sore today, strong tomorrow.",
            "No pain, no gain. Shut up and train.",
            "When you feel like quitting, think about why you started.",
            "Discipline is doing what needs to be done, even when you don't want to do it.",
            "The difference between who you are and who you want to be is what you do.",
            "It's a slow process, but quitting won't speed it up.",
            "You don't get what you wish for. You get what you work for.",
            "Results happen over time, not overnight. Work hard, stay consistent, and be patient.",
            "Your future self will thank you.",
            "Commit to be fit.",
            "Fitness is like a relationship. You can't cheat and expect it to work.",
            "Train insane or remain the same.",
            "The pain of discipline weighs ounces. The pain of regret weighs tons.",
            "Whether you think you can or think you can't, you're right."
        ];

        const recipes = [
            { name: "Grilled Lemon Herb Chicken with Roasted Vegetables", ingredients1: ["6 oz chicken breast", "1 cup broccoli florets", "1 cup bell peppers", "1 tbsp olive oil", "1 lemon", "Fresh herbs (thyme, rosemary)", "Salt and pepper"], ingredients2: ["12 oz chicken breast", "2 cups broccoli florets", "2 cups bell peppers", "2 tbsp olive oil", "2 lemons", "Fresh herbs (thyme, rosemary)", "Salt and pepper"], instructions: ["Preheat oven to 400¬∞F", "Season chicken with lemon juice, herbs, salt, and pepper", "Toss vegetables with olive oil and seasonings", "Place chicken and vegetables on baking sheet", "Roast for 25-30 minutes until chicken reaches 165¬∞F", "Let rest 5 minutes before serving"], macros: {cal: 380, pro: 42, carb: 18, fat: 15} },
            { name: "Baked Salmon with Quinoa and Asparagus", ingredients1: ["6 oz salmon fillet", "1/2 cup cooked quinoa", "1 cup asparagus", "1 tbsp olive oil", "1 lemon", "Garlic, dill", "Salt and pepper"], ingredients2: ["12 oz salmon fillet", "1 cup cooked quinoa", "2 cups asparagus", "2 tbsp olive oil", "2 lemons", "Garlic, dill", "Salt and pepper"], instructions: ["Preheat oven to 375¬∞F", "Cook quinoa according to package directions", "Season salmon with lemon, dill, and garlic", "Toss asparagus with olive oil", "Bake salmon and asparagus for 15-18 minutes", "Serve salmon over quinoa with asparagus on the side"], macros: {cal: 420, pro: 38, carb: 28, fat: 18} },
            { name: "Turkey and Vegetable Stir-Fry", ingredients1: ["6 oz ground turkey", "2 cups mixed vegetables", "1 tbsp soy sauce", "1 tsp sesame oil", "Garlic and ginger", "1/2 cup brown rice"], ingredients2: ["12 oz ground turkey", "4 cups mixed vegetables", "2 tbsp soy sauce", "2 tsp sesame oil", "Garlic and ginger", "1 cup brown rice"], instructions: ["Cook brown rice according to package directions", "Heat sesame oil in large pan over medium-high heat", "Cook turkey until browned, breaking into crumbles", "Add garlic and ginger, cook 1 minute", "Add vegetables and stir-fry 5-7 minutes", "Add soy sauce, toss to combine, serve over rice"], macros: {cal: 395, pro: 36, carb: 32, fat: 12} },
            { name: "Mediterranean Chickpea Bowl", ingredients1: ["1 cup chickpeas", "1 cup cucumber", "1 cup tomatoes", "1/4 cup feta cheese", "2 tbsp hummus", "Mixed greens", "Lemon vinaigrette"], ingredients2: ["2 cups chickpeas", "2 cups cucumber", "2 cups tomatoes", "1/2 cup feta cheese", "4 tbsp hummus", "Mixed greens", "Lemon vinaigrette"], instructions: ["Drain and rinse chickpeas", "Chop cucumber and tomatoes into bite-sized pieces", "Arrange greens in bowl", "Top with chickpeas, cucumber, tomatoes", "Crumble feta on top", "Add dollop of hummus", "Drizzle with lemon vinaigrette"], macros: {cal: 410, pro: 18, carb: 52, fat: 14} },
            { name: "Lean Beef Taco Bowl", ingredients1: ["6 oz lean ground beef", "1/2 cup black beans", "1/2 cup brown rice", "Lettuce, tomato, salsa", "2 tbsp Greek yogurt", "Taco seasoning"], ingredients2: ["12 oz lean ground beef", "1 cup black beans", "1 cup brown rice", "Lettuce, tomato, salsa", "4 tbsp Greek yogurt", "Taco seasoning"], instructions: ["Cook brown rice according to package", "Brown ground beef in pan", "Add taco seasoning and water, simmer", "Heat black beans", "Layer rice, beef, and beans in bowl", "Top with lettuce, tomato, salsa, and Greek yogurt"], macros: {cal: 445, pro: 40, carb: 38, fat: 13} },
            { name: "Shrimp and Zucchini Noodles", ingredients1: ["8 oz shrimp", "2 medium zucchini spiralized", "1 cup cherry tomatoes", "2 cloves garlic", "1 tbsp olive oil", "Fresh basil", "Parmesan"], ingredients2: ["16 oz shrimp", "4 medium zucchini spiralized", "2 cups cherry tomatoes", "4 cloves garlic", "2 tbsp olive oil", "Fresh basil", "Parmesan"], instructions: ["Spiralize zucchini into noodles", "Heat olive oil in large pan", "Cook shrimp 2-3 minutes per side, remove", "Saut√© garlic and tomatoes until soft", "Add zucchini noodles, cook 2-3 minutes", "Return shrimp to pan, toss with basil", "Top with parmesan"], macros: {cal: 285, pro: 34, carb: 14, fat: 11} },
            { name: "Baked Cod with Sweet Potato and Green Beans", ingredients1: ["6 oz cod fillet", "1 medium sweet potato", "1.5 cups green beans", "1 tbsp olive oil", "Lemon, herbs", "Salt and pepper"], ingredients2: ["12 oz cod fillet", "2 medium sweet potatoes", "3 cups green beans", "2 tbsp olive oil", "Lemon, herbs", "Salt and pepper"], instructions: ["Preheat oven to 400¬∞F", "Cube sweet potato and toss with oil", "Roast sweet potato for 15 minutes", "Season cod with lemon and herbs", "Add cod and green beans to pan", "Bake additional 12-15 minutes until cod flakes easily"], macros: {cal: 365, pro: 35, carb: 35, fat: 9} },
            { name: "Greek Yogurt Chicken Salad Lettuce Wraps", ingredients1: ["6 oz cooked chicken breast, shredded", "1/4 cup Greek yogurt", "1 tbsp Dijon mustard", "1/4 cup diced celery", "2 tbsp diced red onion", "Butter lettuce leaves", "Salt, pepper, dill"], ingredients2: ["12 oz cooked chicken breast, shredded", "1/2 cup Greek yogurt", "2 tbsp Dijon mustard", "1/2 cup diced celery", "4 tbsp diced red onion", "Butter lettuce leaves", "Salt, pepper, dill"], instructions: ["Shred cooked chicken into bowl", "Mix Greek yogurt, mustard, and seasonings", "Fold in celery and red onion", "Season with salt, pepper, and dill", "Spoon mixture into lettuce cups", "Serve immediately"], macros: {cal: 295, pro: 44, carb: 8, fat: 9} },
            { name: "Black Bean and Corn Stuffed Peppers", ingredients1: ["2 bell peppers", "1/2 cup black beans", "1/2 cup corn", "1/4 cup cooked quinoa", "1/4 cup salsa", "2 tbsp shredded cheese", "Cumin, chili powder"], ingredients2: ["4 bell peppers", "1 cup black beans", "1 cup corn", "1/2 cup cooked quinoa", "1/2 cup salsa", "4 tbsp shredded cheese", "Cumin, chili powder"], instructions: ["Preheat oven to 375¬∞F", "Cut tops off peppers and remove seeds", "Mix beans, corn, quinoa, salsa, and spices", "Stuff peppers with mixture", "Top with shredded cheese", "Bake 25-30 minutes until peppers are tender"], macros: {cal: 320, pro: 14, carb: 52, fat: 7} },
            { name: "Teriyaki Tofu with Cauliflower Rice", ingredients1: ["8 oz extra-firm tofu", "2 cups cauliflower rice", "1 cup snap peas", "2 tbsp low-sodium teriyaki sauce", "1 tsp sesame oil", "Green onions, sesame seeds"], ingredients2: ["16 oz extra-firm tofu", "4 cups cauliflower rice", "2 cups snap peas", "4 tbsp low-sodium teriyaki sauce", "2 tsp sesame oil", "Green onions, sesame seeds"], instructions: ["Press tofu and cut into cubes", "Heat sesame oil in pan over medium-high heat", "Cook tofu until golden on all sides", "Add teriyaki sauce and coat tofu", "Steam or saut√© cauliflower rice separately", "Blanch snap peas until crisp-tender", "Serve tofu over cauliflower rice with snap peas"], macros: {cal: 275, pro: 22, carb: 18, fat: 14} },
            { name: "Honey Garlic Pork Tenderloin with Roasted Brussels Sprouts", ingredients1: ["6 oz pork tenderloin", "1.5 cups Brussels sprouts", "1 tbsp honey", "2 cloves garlic, minced", "1 tbsp olive oil", "Salt, pepper, rosemary"], ingredients2: ["12 oz pork tenderloin", "3 cups Brussels sprouts", "2 tbsp honey", "4 cloves garlic, minced", "2 tbsp olive oil", "Salt, pepper, rosemary"], instructions: ["Preheat oven to 400¬∞F", "Mix honey, garlic, and seasonings", "Rub mixture over pork tenderloin", "Halve Brussels sprouts and toss with oil", "Roast pork and sprouts for 20-25 minutes", "Let pork rest 5 minutes before slicing"], macros: {cal: 355, pro: 38, carb: 22, fat: 12} },
            { name: "Egg White Veggie Scramble with Avocado Toast", ingredients1: ["4 egg whites", "1 cup spinach", "1/2 cup mushrooms", "1/4 cup diced tomatoes", "1 slice whole grain bread", "1/4 avocado", "Salt, pepper, herbs"], ingredients2: ["8 egg whites", "2 cups spinach", "1 cup mushrooms", "1/2 cup diced tomatoes", "2 slices whole grain bread", "1/2 avocado", "Salt, pepper, herbs"], instructions: ["Saut√© mushrooms until golden", "Add spinach and tomatoes, cook until wilted", "Pour in egg whites, scramble until set", "Toast bread and top with mashed avocado", "Season scramble with salt, pepper, and herbs", "Serve scramble alongside avocado toast"], macros: {cal: 285, pro: 22, carb: 26, fat: 11} },
            { name: "Thai Peanut Chicken Lettuce Wraps", ingredients1: ["6 oz ground chicken", "2 tbsp peanut butter", "1 tbsp soy sauce", "1 tsp sriracha", "1/2 cup shredded carrots", "Butter lettuce", "Cilantro, lime, peanuts"], ingredients2: ["12 oz ground chicken", "4 tbsp peanut butter", "2 tbsp soy sauce", "2 tsp sriracha", "1 cup shredded carrots", "Butter lettuce", "Cilantro, lime, peanuts"], instructions: ["Brown ground chicken in pan", "Mix peanut butter, soy sauce, and sriracha", "Add sauce to chicken and stir to coat", "Fold in shredded carrots", "Spoon into lettuce cups", "Top with cilantro, lime juice, and crushed peanuts"], macros: {cal: 365, pro: 36, carb: 14, fat: 19} },
            { name: "Lemon Dill Tilapia with Cucumber Tomato Salad", ingredients1: ["6 oz tilapia fillet", "1 cup cucumber, diced", "1 cup cherry tomatoes, halved", "2 tbsp red onion", "1 tbsp olive oil", "Lemon, dill, feta"], ingredients2: ["12 oz tilapia fillet", "2 cups cucumber, diced", "2 cups cherry tomatoes, halved", "4 tbsp red onion", "2 tbsp olive oil", "Lemon, dill, feta"], instructions: ["Preheat oven to 400¬∞F", "Season tilapia with lemon, dill, salt, and pepper", "Bake tilapia for 12-15 minutes", "Combine cucumber, tomatoes, and onion", "Dress salad with olive oil and lemon juice", "Serve tilapia with salad, topped with feta"], macros: {cal: 295, pro: 36, carb: 12, fat: 12} },
            { name: "Mushroom and Spinach Turkey Meatballs", ingredients1: ["6 oz ground turkey", "1 cup spinach, chopped", "1/2 cup mushrooms, diced", "1 egg white", "2 tbsp breadcrumbs", "Marinara sauce", "Italian seasoning"], ingredients2: ["12 oz ground turkey", "2 cups spinach, chopped", "1 cup mushrooms, diced", "2 egg whites", "4 tbsp breadcrumbs", "Marinara sauce", "Italian seasoning"], instructions: ["Preheat oven to 400¬∞F", "Saut√© mushrooms and spinach until soft, cool slightly", "Mix turkey, vegetables, egg white, breadcrumbs, and seasonings", "Form into golf ball-sized meatballs", "Bake 18-20 minutes until cooked through", "Serve with warm marinara sauce"], macros: {cal: 310, pro: 38, carb: 16, fat: 10} },
            { name: "Asian Sesame Tuna Poke Bowl", ingredients1: ["6 oz sushi-grade tuna, cubed", "1/2 cup brown rice", "1/2 cup edamame", "1/4 avocado", "2 tbsp low-sodium soy sauce", "Sesame oil, ginger, green onion"], ingredients2: ["12 oz sushi-grade tuna, cubed", "1 cup brown rice", "1 cup edamame", "1/2 avocado", "4 tbsp low-sodium soy sauce", "Sesame oil, ginger, green onion"], instructions: ["Cook brown rice according to package", "Marinate tuna in soy sauce, sesame oil, and ginger", "Cook edamame according to package", "Build bowl with rice as base", "Top with marinated tuna, edamame, and sliced avocado", "Garnish with green onion and sesame seeds"], macros: {cal: 425, pro: 42, carb: 36, fat: 13} },
            { name: "Cajun Chicken with Cauliflower Mash", ingredients1: ["6 oz chicken breast", "2 cups cauliflower florets", "1 tbsp Greek yogurt", "1 tbsp olive oil", "Cajun seasoning", "Garlic, chives"], ingredients2: ["12 oz chicken breast", "4 cups cauliflower florets", "2 tbsp Greek yogurt", "2 tbsp olive oil", "Cajun seasoning", "Garlic, chives"], instructions: ["Season chicken generously with Cajun spices", "Grill or pan-sear chicken 6-7 minutes per side", "Steam cauliflower until very tender", "Blend cauliflower with yogurt and garlic until smooth", "Let chicken rest 5 minutes before slicing", "Serve sliced chicken over cauliflower mash with chives"], macros: {cal: 335, pro: 44, carb: 12, fat: 12} },
            { name: "White Bean and Kale Soup with Turkey Sausage", ingredients1: ["3 oz turkey sausage, sliced", "1/2 cup white beans", "1.5 cups kale, chopped", "2 cups low-sodium chicken broth", "1/4 cup diced onion", "Garlic, Italian herbs"], ingredients2: ["6 oz turkey sausage, sliced", "1 cup white beans", "3 cups kale, chopped", "4 cups low-sodium chicken broth", "1/2 cup diced onion", "Garlic, Italian herbs"], instructions: ["Brown turkey sausage in pot, remove and set aside", "Saut√© onion and garlic until soft", "Add broth, beans, and herbs, bring to simmer", "Add kale and cook until wilted", "Return sausage to pot", "Simmer 10 minutes to blend flavors"], macros: {cal: 295, pro: 24, carb: 28, fat: 10} },
            { name: "Grilled Flank Steak with Chimichurri and Roasted Peppers", ingredients1: ["6 oz flank steak", "1 cup mixed bell peppers", "2 tbsp chimichurri sauce", "1 tbsp olive oil", "Salt and pepper"], ingredients2: ["12 oz flank steak", "2 cups mixed bell peppers", "4 tbsp chimichurri sauce", "2 tbsp olive oil", "Salt and pepper"], instructions: ["Season steak with salt and pepper", "Grill steak 4-5 minutes per side for medium", "Roast peppers at 425¬∞F for 20 minutes", "Let steak rest 5 minutes before slicing against the grain", "Drizzle steak with chimichurri sauce", "Serve with roasted peppers"], macros: {cal: 375, pro: 40, carb: 10, fat: 18} },
            { name: "Overnight Protein Oats with Berries", ingredients1: ["1/2 cup rolled oats", "1/2 cup Greek yogurt", "1/2 cup almond milk", "1 scoop protein powder", "1/2 cup mixed berries", "1 tbsp chia seeds", "Honey or stevia"], ingredients2: ["1 cup rolled oats", "1 cup Greek yogurt", "1 cup almond milk", "2 scoops protein powder", "1 cup mixed berries", "2 tbsp chia seeds", "Honey or stevia"], instructions: ["Combine oats, yogurt, milk, and protein powder in jar", "Stir in chia seeds", "Cover and refrigerate overnight (or at least 4 hours)", "In the morning, stir well", "Top with fresh berries", "Drizzle with honey or stevia if desired"], macros: {cal: 385, pro: 32, carb: 46, fat: 9} }
        ];

        /* --- APP LOGIC --- */
        function initApp() {
            const firebaseConfig = {
                apiKey: "AIzaSyBpcOAWrr8hV2LQ2_mIUfIgvs05y2AYTRY",
                authDomain: "cherokee-chooters-shred.firebaseapp.com",
                projectId: "cherokee-chooters-shred",
                storageBucket: "cherokee-chooters-shred.firebasestorage.app",
                messagingSenderId: "448611335080",
                appId: "1:448611335080:web:eb9eb0688d9b846e0cbb9d"
            };

            if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore();

            // State
            const people = ['Adam', 'Sean', 'Daniel', 'Mark'];
            const colors = { Adam: '#3b82f6', Sean: '#ef4444', Daniel: '#10b981', Mark: '#f59e0b' };
            let weights = { Adam: [], Sean: [], Daniel: [], Mark: [] };
            let goals = { Adam: null, Sean: null, Daniel: null, Mark: null };
            let messages = [];
            
            // UI State
            let selectedPerson = null;
            let currentInput = "";
            let portionSize = 1;
            let chartInstance = null;

            // --- LISTENERS ---
            db.collection('weights').onSnapshot(snap => {
                weights = { Adam: [], Sean: [], Daniel: [], Mark: [] };
                snap.forEach(doc => {
                    const d = doc.data();
                    if(weights[d.person]) weights[d.person].push({ ...d, id: doc.id });
                });
                Object.keys(weights).forEach(k => weights[k].sort((a,b) => a.timestamp - b.timestamp));
                render();
            });

            db.collection('goals').onSnapshot(snap => {
                snap.forEach(doc => { goals[doc.data().person] = doc.data().goal; });
                render();
            });

            db.collection('messages').orderBy('timestamp', 'desc').limit(50).onSnapshot(snap => {
                messages = [];
                snap.forEach(doc => messages.push({ ...doc.data(), id: doc.id }));
                render();
            });

            // --- FUNCTIONS ---
            
            window.selectPerson = (name) => { selectedPerson = name; currentInput = ""; render(); }
            window.numpadPress = (num) => {
                if (!selectedPerson) return alert("Select a person first!");
                if (currentInput.length > 5) return;
                if (num === '.' && currentInput.includes('.')) return;
                currentInput += num;
                render();
            }
            window.numpadDelete = () => { currentInput = currentInput.slice(0, -1); render(); }
            
            window.submitWeight = async () => {
                if (!selectedPerson || !currentInput) return;
                const weight = parseFloat(currentInput);
                await addWeightToDb(selectedPerson, weight, Date.now());
                currentInput = ""; selectedPerson = null; celebrate(); render();
            }

            window.addRetroactiveWeight = async () => {
                const p = document.getElementById('retroPerson').value;
                const w = parseFloat(document.getElementById('retroWeight').value);
                const d = document.getElementById('retroDate').value;
                const t = document.getElementById('retroTime').value;
                
                if(!w || !d || !t) return alert("Fill all fields");
                const ts = new Date(d + 'T' + t).getTime();
                await addWeightToDb(p, w, ts);
                alert("Retroactive entry added");
                document.getElementById('retroWeight').value = '';
            }

            async function addWeightToDb(person, weight, timestamp) {
                try {
                    await db.collection('weights').add({ person, weight, timestamp });
                } catch(e) { alert("Error: " + e.message); }
            }

            window.postMessage = async () => {
                const p = document.getElementById('msgPerson').value;
                const m = document.getElementById('msgInput').value;
                if(!m) return;
                await db.collection('messages').add({ person: p, message: m, timestamp: Date.now() });
                document.getElementById('msgInput').value = '';
            }

            window.deleteMessage = async (id) => {
                if(confirm('Delete message?')) await db.collection('messages').doc(id).delete();
            }

            window.setPortions = (n) => { portionSize = n; render(); }

            window.downloadCSV = () => {
                let csv = 'Name,Weight,Date\n';
                Object.keys(weights).forEach(p => {
                    weights[p].forEach(e => {
                        csv += `${p},${e.weight},${new Date(e.timestamp).toLocaleString()}\n`;
                    });
                });
                const blob = new Blob([csv], {type: 'text/csv'});
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a'); a.href = url; a.download = 'shred_data.csv';
                a.click();
            }

            // --- HELPERS ---
            const getLoss = p => { const w = weights[p]; return w.length > 1 ? w[0].weight - w[w.length-1].weight : 0; }
            const getPct = p => { const w = weights[p]; return w.length > 1 ? ((w[0].weight - w[w.length-1].weight)/w[0].weight)*100 : 0; }
            const getTotalLoss = () => people.reduce((a,p) => a + getLoss(p), 0);
            const getStreak = p => {
                const w = weights[p];
                if(!w.length) return 0;
                let streak = 0;
                const today = new Date().setHours(0,0,0,0);
                const dates = [...new Set(w.map(e => new Date(e.timestamp).setHours(0,0,0,0)))].sort((a,b)=>b-a);
                if(dates[0] < today - 86400000) return 0; // Streak broken if no entry yesterday/today
                for(let i=0; i<dates.length; i++) {
                    if(i > 0 && dates[i-1] - dates[i] > 86400000) break;
                    streak++;
                }
                return streak;
            }

            // --- RENDERER ---
            function render() {
                const totalLoss = getTotalLoss();
                const daysLeft = Math.ceil((new Date('2026-02-27') - new Date()) / (86400000));
                
                // Leaders
                let lLbs = {n:'-',v:-999}, lPct = {n:'-',v:-999};
                people.forEach(p => {
                    if(getLoss(p) > lLbs.v) lLbs = {n:p, v:getLoss(p)};
                    if(getPct(p) > lPct.v) lPct = {n:p, v:getPct(p)};
                });

                let html = `<div class="container">`;
                
                // HEADER
                html += `
                    <div class="header">
                        <h1>üî• Cherokee Shred üî•</h1>
                        <div class="quote-box">"${quotes[Math.floor(Date.now()/86400000) % quotes.length]}"</div>
                    </div>`;

                // BENTO GRID
                html += `
                    <div class="bento-grid">
                        <div class="bento-card card-cruise"><div class="bento-label">Countdown</div><div class="bento-value">${daysLeft}</div><div class="bento-sub">Days until Cruise</div></div>
                        <div class="bento-card card-total"><div class="bento-label">Team Loss</div><div class="bento-value">${totalLoss.toFixed(1)}</div><div class="bento-sub">lbs destroyed</div></div>
                        <div class="bento-card card-leader-lbs"><div class="bento-label" style="color:#b45309">üëë Lbs Leader</div><div class="bento-value" style="color:#b45309">${lLbs.n}</div><div class="bento-sub">${lLbs.v.toFixed(1)} lbs</div></div>
                        <div class="bento-card card-leader-pct"><div class="bento-label" style="color:#166534">üöÄ % Leader</div><div class="bento-value" style="color:#166534">${lPct.n}</div><div class="bento-sub">${lPct.v.toFixed(1)}%</div></div>
                    </div>`;

                // NUMPAD
                html += `
                    <div class="logging-section">
                        <div class="section-title">Log Your Weight</div>
                        <div class="person-selector">${people.map(p => `<button class="person-btn ${selectedPerson===p?'selected':''}" onclick="selectPerson('${p}')">${p}</button>`).join('')}</div>
                        <div class="weight-display ${!currentInput?'placeholder':''}">${currentInput||'0.0'}<span class="cursor">|</span> lbs</div>
                        <div class="numpad">
                            ${[1,2,3,4,5,6,7,8,9].map(n=>`<button class="num-btn" onclick="numpadPress('${n}')">${n}</button>`).join('')}
                            <button class="num-btn" onclick="numpadPress('.')">.</button>
                            <button class="num-btn" onclick="numpadPress('0')">0</button>
                            <button class="num-btn delete" onclick="numpadDelete()">‚å´</button>
                            <button class="num-btn submit" onclick="submitWeight()">LOG WEIGHT</button>
                        </div>
                    </div>`;

                // CARDS
                html += `<div class="status-grid">`;
                people.forEach(p => {
                    const w = weights[p];
                    const cur = w.length ? w[w.length-1].weight : 0;
                    const start = w.length ? w[0].weight : 0;
                    const loss = start - cur;
                    const streak = getStreak(p);
                    
                    html += `
                        <div class="mini-card" style="border-left-color:${colors[p]}">
                            <div class="mini-header"><span class="mini-name" style="color:${colors[p]}">${p}</span><span class="mini-weight">${cur||'--'} lbs</span></div>
                            <div style="font-size:0.9rem; color:#6b7280; display:flex; justify-content:space-between">
                                <span>Start: ${start}</span>
                                <span style="color:${loss>0?colors.Daniel:colors.Sean}">${loss>0?'‚Üì':'‚Üë'} ${Math.abs(loss).toFixed(1)}</span>
                            </div>
                            <div class="badges-container">
                                ${streak > 2 ? `<span class="badge gold">üî• ${streak} Day Streak</span>` : ''}
                                ${loss >= 5 ? `<span class="badge green">‚≠ê 5lb Club</span>` : ''}
                                ${loss >= 10 ? `<span class="badge blue">üèÜ 10lb Club</span>` : ''}
                            </div>
                        </div>`;
                });
                html += `</div>`;

                // CHART
                html += `<div class="chart-container"><h2 class="section-title">Progress Trends</h2><div class="chart-wrapper"><canvas id="mainChart"></canvas></div></div>`;

                // MESSAGES
                html += `
                    <div class="message-board">
                        <h2 class="section-title">üí¨ Message Board</h2>
                        <div class="message-input-area">
                            <select id="msgPerson" class="message-select">${people.map(p=>`<option value="${p}">${p}</option>`).join('')}</select>
                            <input id="msgInput" class="message-input" placeholder="Say something..." onkeypress="if(event.key==='Enter') postMessage()">
                            <button class="btn-post" onclick="postMessage()">Post</button>
                        </div>
                        <div class="messages-list">
                            ${messages.map(m => `
                                <div class="message-item">
                                    <div class="message-meta"><span style="font-weight:700; color:${colors[m.person]}">${m.person}</span><span>${new Date(m.timestamp).toLocaleDateString()} <button class="btn-del-msg" onclick="deleteMessage('${m.id}')">√ó</button></span></div>
                                    <div>${m.message}</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>`;

                // TABLE
                html += `
                    <div class="table-container">
                        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem">
                            <h2 class="section-title" style="margin:0">History</h2>
                            <button class="btn-download" onclick="downloadCSV()">Download CSV</button>
                        </div>
                        <div style="max-height:300px; overflow-y:auto">
                            <table>
                                <thead><tr><th>Name</th><th>Weight</th><th>Date</th></tr></thead>
                                <tbody>
                                    ${Object.values(weights).flat().sort((a,b)=>b.timestamp-a.timestamp).map(e => `
                                        <tr>
                                            <td style="font-weight:600; color:${colors[e.person]}">${e.person}</td>
                                            <td>${e.weight}</td>
                                            <td>${new Date(e.timestamp).toLocaleString()}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>`;

                // RETROACTIVE
                html += `
                    <div class="retroactive-container">
                        <h2 class="section-title">üïí Add Past Entry</h2>
                        <div class="retro-form">
                            <div><span class="form-label">Who</span><select id="retroPerson" class="retro-input">${people.map(p=>`<option value="${p}">${p}</option>`).join('')}</select></div>
                            <div><span class="form-label">Weight</span><input id="retroWeight" type="number" class="retro-input" step="0.1"></div>
                            <div><span class="form-label">Date</span><input id="retroDate" type="date" class="retro-input"></div>
                            <div><span class="form-label">Time</span><input id="retroTime" type="time" class="retro-input"></div>
                            <button class="btn-post" style="height:42px; background:#8b5cf6" onclick="addRetroactiveWeight()">Add</button>
                        </div>
                    </div>`;

                // RECIPE
                const dayRecipe = recipes[Math.floor(Date.now()/86400000) % recipes.length];
                const ings = portionSize === 1 ? dayRecipe.ingredients1 : dayRecipe.ingredients2;
                html += `
                    <div class="recipe-container">
                        <h2 class="section-title">ü•ó Daily Recipe</h2>
                        <div class="recipe-name">${dayRecipe.name}</div>
                        <div style="margin-bottom:1rem">
                            <button class="portion-btn ${portionSize===1?'active':''}" onclick="setPortions(1)">1 Serving</button>
                            <button class="portion-btn ${portionSize===2?'active':''}" onclick="setPortions(2)">2 Servings</button>
                        </div>
                        <div style="display:grid; grid-template-columns:1fr 1fr; gap:20px">
                            <ul>${ings.map(i=>`<li>‚Ä¢ ${i}</li>`).join('')}</ul>
                            <ol style="padding-left:20px">${dayRecipe.instructions.map(i=>`<li>${i}</li>`).join('')}</ol>
                        </div>
                        <div class="macros-grid">
                            <div class="macro-card"><div>Cal</div><strong>${dayRecipe.macros.cal*portionSize}</strong></div>
                            <div class="macro-card"><div>Pro</div><strong>${dayRecipe.macros.pro*portionSize}g</strong></div>
                            <div class="macro-card"><div>Carb</div><strong>${dayRecipe.macros.carb*portionSize}g</strong></div>
                            <div class="macro-card"><div>Fat</div><strong>${dayRecipe.macros.fat*portionSize}g</strong></div>
                        </div>
                    </div>`;

                // HEATMAP
                html += renderHeatmap();
                html += `</div>`; // Close container

                document.getElementById('root').innerHTML = html;
                updateChart();
            }

            function updateChart() {
                const ctx = document.getElementById('mainChart');
                if(!ctx) return;
                
                // Collect all unique timestamps
                const allTimes = new Set();
                Object.values(weights).flat().forEach(e => allTimes.add(e.timestamp));
                const labels = Array.from(allTimes).sort().map(t => new Date(t).toLocaleDateString());

                const datasets = people.map(p => {
                    // Create scatter-like data points that connect
                    const data = weights[p].map(e => ({ x: new Date(e.timestamp).toLocaleDateString(), y: e.weight }));
                    return {
                        label: p,
                        data: data,
                        borderColor: colors[p],
                        backgroundColor: colors[p],
                        tension: 0.3,
                        spanGaps: true
                    };
                });

                if(chartInstance) chartInstance.destroy();
                chartInstance = new Chart(ctx, {
                    type: 'line',
                    data: { labels: labels, datasets: datasets },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: { mode: 'index', intersect: false },
                        plugins: { legend: { position: 'bottom' } }
                    }
                });
            }

            function renderHeatmap() {
                // FIXED: Date Range Jan 1 2026 to Feb 26 2026
                const startDate = new Date('2026-01-01T00:00:00');
                const endDate = new Date('2026-02-26T23:59:59');
                
                // Set currentDay to previous Sunday for grid alignment
                let currentDay = new Date(startDate);
                while(currentDay.getDay() !== 0) currentDay.setDate(currentDay.getDate() - 1);

                const activityMap = {};
                Object.values(weights).flat().forEach(e => {
                    const d = new Date(e.timestamp).toISOString().split('T')[0];
                    activityMap[d] = (activityMap[d]||0) + 1;
                });

                let html = '<div class="chart-container"><h3 class="section-title">Consistency (Jan 1 - Feb 26)</h3><div class="heatmap-grid">';
                
                // Loop until we pass end date
                while(currentDay <= endDate) {
                    html += '<div class="heatmap-col">';
                    for (let d = 0; d < 7; d++) {
                        const dateStr = currentDay.toISOString().split('T')[0];
                        
                        // Check if day is within our target range
                        if (currentDay >= startDate && currentDay <= endDate) {
                            const count = activityMap[dateStr] || 0;
                            html += `<div class="day-cell level-${Math.min(count, 4)}" title="${dateStr}: ${count}"></div>`;
                        } else {
                            // Transparent placeholder for alignment
                            html += `<div class="day-cell" style="background:transparent"></div>`;
                        }
                        
                        currentDay.setDate(currentDay.getDate() + 1);
                    }
                    html += '</div>';
                }
                html += '</div></div>';
                return html;
            }

            function celebrate() {
                const c = document.createElement('div');
                c.style.position='fixed'; c.style.top='0'; c.style.left='0'; c.style.width='100%'; c.style.height='100%'; c.style.pointerEvents='none'; c.style.zIndex='999';
                document.body.appendChild(c);
                const colors = ['#f00','#0f0','#00f','#ff0','#0ff','#f0f'];
                for(let i=0; i<100; i++) {
                    const el=document.createElement('div'); el.style.position='absolute'; el.style.width='10px'; el.style.height='10px'; el.style.background=colors[Math.floor(Math.random()*6)];
                    el.style.left=Math.random()*100+'%'; el.style.top='-10px'; el.style.transition='top 2s ease-out'; c.appendChild(el);
                    setTimeout(()=>el.style.top='110%', 10);
                }
                setTimeout(()=>c.remove(), 2000);
            }
        }

        if (typeof firebase !== 'undefined') initApp();
        else window.addEventListener('load', () => setTimeout(initApp, 500));
    </script>
</body>
</html>
